{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/web.dom-exception.stack.js\";\nimport PageViewer from '../src/components/PageViewer.vue';\nimport Navbar from '../src/components/Navbar.vue';\nimport Calculator from '../src/components/Calculator.vue';\nimport Contact from \"@/components/Contact.vue\";\nimport { authState } from '@/eventBus';\nimport { computed } from 'vue';\nconst isLoggedIn = computed(() => authState.isLoggedIn);\nexport default {\n  components: {\n    Navbar,\n    PageViewer,\n    Calculator,\n    Contact\n  },\n  created() {\n    this.getPages();\n    this.checkToken();\n    if (authState.isLoggedIn) {\n      this.$router.push('/calculator');\n    }\n  },\n  data() {\n    return {\n      activePage: 0,\n      pages: []\n    };\n  },\n  methods: {\n    async getPages() {\n      let res = await fetch('pages.json');\n      let data = await res.json();\n      this.pages = data;\n    },\n    checkToken() {\n      const token = localStorage.getItem('jwtToken');\n      if (token) {\n        try {\n          const payload = JSON.parse(atob(token.split('.')[1]));\n          const expiry = payload.exp * 1000;\n          if (Date.now() < expiry) {\n            authState.isLoggedIn = true;\n          } else {\n            localStorage.removeItem('jwtToken');\n            authState.isLoggedIn = false;\n          }\n        } catch (error) {\n          console.error('Invalid token format:', error);\n          localStorage.removeItem('jwtToken');\n          authState.isLoggedIn = false;\n        }\n      }\n    }\n  }\n};","map":{"version":3,"names":["PageViewer","Navbar","Calculator","Contact","authState","computed","isLoggedIn","components","created","getPages","checkToken","$router","push","data","activePage","pages","methods","res","fetch","json","token","localStorage","getItem","payload","JSON","parse","atob","split","expiry","exp","Date","now","removeItem","error","console"],"sources":["C:\\Users\\sigau\\OneDrive - NTNU\\Dataingeniør S4\\IDATT2105 Full-stack applikasjonsutvikling\\Øvinger\\Øving 5\\Frontend\\vue-oving-mpa\\src\\App.vue"],"sourcesContent":["<template>\r\n  <navbar\r\n      :pages=\"pages\"\r\n      :activePage=\"activePage\"\r\n  ></navbar>\r\n\r\n  <router-view></router-view>\r\n</template>\r\n\r\n<script>\r\nimport PageViewer from '../src/components/PageViewer.vue'\r\nimport Navbar from '../src/components/Navbar.vue'\r\nimport Calculator from '../src/components/Calculator.vue'\r\nimport Contact from \"@/components/Contact.vue\";\r\nimport { authState } from '@/eventBus';\r\nimport { computed } from 'vue';\r\n\r\nconst isLoggedIn = computed(() => authState.isLoggedIn);\r\n\r\nexport default {\r\n  components: {\r\n    Navbar,\r\n    PageViewer,\r\n    Calculator,\r\n    Contact\r\n  },\r\n  created() {\r\n    this.getPages();\r\n    this.checkToken();\r\n    if (authState.isLoggedIn) {\r\n      this.$router.push('/calculator')\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      activePage: 0,\r\n      pages: []\r\n    }\r\n  },\r\n  methods: {\r\n    async getPages() {\r\n      let res = await fetch('pages.json')\r\n      let data = await res.json()\r\n\r\n      this.pages = data;\r\n    },\r\n    checkToken() {\r\n      const token = localStorage.getItem('jwtToken');\r\n      if (token) {\r\n        try {\r\n          const payload = JSON.parse(atob(token.split('.')[1]));\r\n          const expiry = payload.exp * 1000;\r\n          if (Date.now() < expiry) {\r\n            authState.isLoggedIn = true;\r\n          } else {\r\n            localStorage.removeItem('jwtToken');\r\n            authState.isLoggedIn = false;\r\n          }\r\n        } catch (error) {\r\n          console.error('Invalid token format:', error);\r\n          localStorage.removeItem('jwtToken');\r\n          authState.isLoggedIn = false;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n"],"mappings":";;AAUA,OAAOA,UAAS,MAAO,kCAAiC;AACxD,OAAOC,MAAK,MAAO,8BAA6B;AAChD,OAAOC,UAAS,MAAO,kCAAiC;AACxD,OAAOC,OAAM,MAAO,0BAA0B;AAC9C,SAASC,SAAQ,QAAS,YAAY;AACtC,SAASC,QAAO,QAAS,KAAK;AAE9B,MAAMC,UAAS,GAAID,QAAQ,CAAC,MAAMD,SAAS,CAACE,UAAU,CAAC;AAEvD,eAAe;EACbC,UAAU,EAAE;IACVN,MAAM;IACND,UAAU;IACVE,UAAU;IACVC;EACF,CAAC;EACDK,OAAOA,CAAA,EAAG;IACR,IAAI,CAACC,QAAQ,CAAC,CAAC;IACf,IAAI,CAACC,UAAU,CAAC,CAAC;IACjB,IAAIN,SAAS,CAACE,UAAU,EAAE;MACxB,IAAI,CAACK,OAAO,CAACC,IAAI,CAAC,aAAa;IACjC;EACF,CAAC;EACDC,IAAGA,CAAA,EAAK;IACN,OAAO;MACLC,UAAU,EAAE,CAAC;MACbC,KAAK,EAAE;IACT;EACF,CAAC;EACDC,OAAO,EAAE;IACP,MAAMP,QAAQA,CAAA,EAAG;MACf,IAAIQ,GAAE,GAAI,MAAMC,KAAK,CAAC,YAAY;MAClC,IAAIL,IAAG,GAAI,MAAMI,GAAG,CAACE,IAAI,CAAC;MAE1B,IAAI,CAACJ,KAAI,GAAIF,IAAI;IACnB,CAAC;IACDH,UAAUA,CAAA,EAAG;MACX,MAAMU,KAAI,GAAIC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC;MAC9C,IAAIF,KAAK,EAAE;QACT,IAAI;UACF,MAAMG,OAAM,GAAIC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACN,KAAK,CAACO,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;UACrD,MAAMC,MAAK,GAAIL,OAAO,CAACM,GAAE,GAAI,IAAI;UACjC,IAAIC,IAAI,CAACC,GAAG,CAAC,IAAIH,MAAM,EAAE;YACvBxB,SAAS,CAACE,UAAS,GAAI,IAAI;UAC7B,OAAO;YACLe,YAAY,CAACW,UAAU,CAAC,UAAU,CAAC;YACnC5B,SAAS,CAACE,UAAS,GAAI,KAAK;UAC9B;QACF,EAAE,OAAO2B,KAAK,EAAE;UACdC,OAAO,CAACD,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;UAC7CZ,YAAY,CAACW,UAAU,CAAC,UAAU,CAAC;UACnC5B,SAAS,CAACE,UAAS,GAAI,KAAK;QAC9B;MACF;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}