{"ast":null,"code":"import \"core-js/modules/web.dom-exception.stack.js\";\nimport { createRouter, createWebHashHistory, createWebHistory } from \"vue-router\";\nimport PageViewer from \"@/components/PageViewer.vue\";\nimport Calculator from \"@/components/Calculator.vue\";\nimport Contact from \"@/components/Contact.vue\";\nimport Login from \"@/components/Login.vue\";\nimport { authState } from \"@/eventBus\";\nconst isTokenValid = () => {\n  const token = sessionStorage.getItem('jwtToken');\n  if (!token) return false;\n  try {\n    const payload = JSON.parse(atob(token.split('.')[1])); // Decode JWT payload\n    const expiry = payload.exp * 1000; // Convert seconds to milliseconds\n    return Date.now() < expiry; // Check if token is still valid\n  } catch (error) {\n    console.error('Invalid token format:', error);\n    return false;\n  }\n};\nconst router = createRouter({\n  history: createWebHashHistory(),\n  routes: [{\n    path: '/login',\n    component: Login\n  }, {\n    path: '/:index?',\n    component: PageViewer\n  }, {\n    path: '/calculator',\n    component: Calculator\n  }, {\n    path: '/contact',\n    component: Contact\n  }, {\n    path: '/',\n    redirect: '/login'\n  }]\n});\nrouter.beforeEach((to, from, next) => {\n  const isAuthnticated = isTokenValid();\n  if (to.path !== '/login' && !isAuthnticated) {\n    next('/login');\n  } else {\n    next();\n  }\n});\nexport default router;","map":{"version":3,"names":["createRouter","createWebHashHistory","createWebHistory","PageViewer","Calculator","Contact","Login","authState","isTokenValid","token","sessionStorage","getItem","payload","JSON","parse","atob","split","expiry","exp","Date","now","error","console","router","history","routes","path","component","redirect","beforeEach","to","from","next","isAuthnticated"],"sources":["C:/Users/sigau/OneDrive - NTNU/Dataingeniør S4/IDATT2105 Full-stack applikasjonsutvikling/Øvinger/Øving 5/Frontend/vue-oving-mpa/src/routes.js"],"sourcesContent":["import {createRouter, createWebHashHistory, createWebHistory} from \"vue-router\";\r\nimport PageViewer from \"@/components/PageViewer.vue\";\r\nimport Calculator from \"@/components/Calculator.vue\";\r\nimport Contact from \"@/components/Contact.vue\";\r\nimport Login from \"@/components/Login.vue\";\r\nimport { authState } from \"@/eventBus\";\r\n\r\nconst isTokenValid = () => {\r\n    const token = sessionStorage.getItem('jwtToken');\r\n    if (!token) return false;\r\n\r\n    try {\r\n        const payload = JSON.parse(atob(token.split('.')[1])); // Decode JWT payload\r\n        const expiry = payload.exp * 1000; // Convert seconds to milliseconds\r\n        return Date.now() < expiry; // Check if token is still valid\r\n    } catch (error) {\r\n        console.error('Invalid token format:', error);\r\n        return false;\r\n    }\r\n};\r\n\r\nconst router = createRouter({\r\n    history: createWebHashHistory(),\r\n    routes: [\r\n        { path: '/login', component: Login },\r\n        { path: '/:index?', component: PageViewer },\r\n        { path: '/calculator', component: Calculator },\r\n        { path: '/contact', component: Contact },\r\n        { path: '/', redirect: '/login'}\r\n    ]\r\n});\r\n\r\nrouter.beforeEach((to, from, next) => {\r\n    const isAuthnticated = isTokenValid();\r\n    if (to.path !== '/login' && !isAuthnticated) {\r\n        next('/login');\r\n    } else {\r\n        next();\r\n    }\r\n});\r\n\r\nexport default router;\r\n"],"mappings":";AAAA,SAAQA,YAAY,EAAEC,oBAAoB,EAAEC,gBAAgB,QAAO,YAAY;AAC/E,OAAOC,UAAU,MAAM,6BAA6B;AACpD,OAAOC,UAAU,MAAM,6BAA6B;AACpD,OAAOC,OAAO,MAAM,0BAA0B;AAC9C,OAAOC,KAAK,MAAM,wBAAwB;AAC1C,SAASC,SAAS,QAAQ,YAAY;AAEtC,MAAMC,YAAY,GAAGA,CAAA,KAAM;EACvB,MAAMC,KAAK,GAAGC,cAAc,CAACC,OAAO,CAAC,UAAU,CAAC;EAChD,IAAI,CAACF,KAAK,EAAE,OAAO,KAAK;EAExB,IAAI;IACA,MAAMG,OAAO,GAAGC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACN,KAAK,CAACO,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACvD,MAAMC,MAAM,GAAGL,OAAO,CAACM,GAAG,GAAG,IAAI,CAAC,CAAC;IACnC,OAAOC,IAAI,CAACC,GAAG,CAAC,CAAC,GAAGH,MAAM,CAAC,CAAC;EAChC,CAAC,CAAC,OAAOI,KAAK,EAAE;IACZC,OAAO,CAACD,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;IAC7C,OAAO,KAAK;EAChB;AACJ,CAAC;AAED,MAAME,MAAM,GAAGvB,YAAY,CAAC;EACxBwB,OAAO,EAAEvB,oBAAoB,CAAC,CAAC;EAC/BwB,MAAM,EAAE,CACJ;IAAEC,IAAI,EAAE,QAAQ;IAAEC,SAAS,EAAErB;EAAM,CAAC,EACpC;IAAEoB,IAAI,EAAE,UAAU;IAAEC,SAAS,EAAExB;EAAW,CAAC,EAC3C;IAAEuB,IAAI,EAAE,aAAa;IAAEC,SAAS,EAAEvB;EAAW,CAAC,EAC9C;IAAEsB,IAAI,EAAE,UAAU;IAAEC,SAAS,EAAEtB;EAAQ,CAAC,EACxC;IAAEqB,IAAI,EAAE,GAAG;IAAEE,QAAQ,EAAE;EAAQ,CAAC;AAExC,CAAC,CAAC;AAEFL,MAAM,CAACM,UAAU,CAAC,CAACC,EAAE,EAAEC,IAAI,EAAEC,IAAI,KAAK;EAClC,MAAMC,cAAc,GAAGzB,YAAY,CAAC,CAAC;EACrC,IAAIsB,EAAE,CAACJ,IAAI,KAAK,QAAQ,IAAI,CAACO,cAAc,EAAE;IACzCD,IAAI,CAAC,QAAQ,CAAC;EAClB,CAAC,MAAM;IACHA,IAAI,CAAC,CAAC;EACV;AACJ,CAAC,CAAC;AAEF,eAAeT,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}